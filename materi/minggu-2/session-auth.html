<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session & Autentikasi | Minggu 2 | PHP untuk SMK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
</head>

<body class="bg-slate-50">
    <!-- Navbar -->
    <nav class="navbar fixed top-0 left-0 right-0 z-50 px-4 lg:px-8 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <a href="../../index.html" class="flex items-center gap-3">
                <div
                    class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center">
                    <span class="text-white font-bold">&lt;/&gt;</span>
                </div>
                <span class="font-bold text-xl text-slate-800 hidden sm:block">PHP<span
                        class="text-indigo-600">SMK</span></span>
            </a>
            <div class="hidden md:flex items-center gap-8">
                <a href="../../index.html" class="text-slate-600 hover:text-indigo-600">Beranda</a>
                <a href="../../silabus.html" class="text-slate-600 hover:text-indigo-600">Silabus</a>
                <a href="form-html-php.html" class="text-indigo-600 font-medium">Materi</a>
                <a href="../../project-akhir.html" class="text-slate-600 hover:text-indigo-600">Project Akhir</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="pt-28 pb-8 px-4 bg-gradient-to-br from-emerald-500 to-teal-600">
        <div class="max-w-4xl mx-auto">
            <div class="week-badge week-2 mb-4">Minggu 2 - Materi 9</div>
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">üîê Session & Autentikasi</h1>
            <p class="text-white/90">Membuat sistem login dan register dengan PHP</p>
        </div>
    </section>

    <!-- Content -->
    <section class="py-12 px-4">
        <div class="max-w-4xl mx-auto">

            <!-- Tujuan -->
            <div class="card p-6 mb-8">
                <h2 class="text-xl font-bold text-slate-800 mb-3">üéØ Tujuan Pembelajaran</h2>
                <ul class="space-y-2 text-slate-600">
                    <li>‚Ä¢ Memahami konsep session di PHP dan cara kerjanya</li>
                    <li>‚Ä¢ Membuat form register dengan password yang aman (hashing)</li>
                    <li>‚Ä¢ Membuat form login dengan verifikasi password</li>
                    <li>‚Ä¢ Membuat halaman yang hanya bisa diakses setelah login</li>
                    <li>‚Ä¢ Menggabungkan PHP dengan HTML untuk tampilan yang menarik</li>
                </ul>
            </div>

            <!-- ======================= BAGIAN 1: SESSION ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4">üì¶ Bagian 1: Apa itu Session?</h2>

            <div class="card p-6 mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-indigo-500">
                <h3 class="font-bold text-indigo-800 mb-2">ü§î Analogi Sederhana</h3>
                <p class="text-slate-700">
                    Bayangkan kamu masuk ke <strong>perpustakaan</strong>. Saat masuk, kamu mendapat <strong>kartu
                        pengunjung</strong>
                    dengan nomor unik. Selama kartu itu ada, petugas tahu siapa kamu. Saat pulang, kartu dikembalikan
                    dan petugas "lupa" siapa kamu.
                </p>
                <p class="text-slate-600 mt-2">
                    <strong>Session = Kartu Pengunjung Digital</strong>. PHP memberikan ID unik ke setiap pengunjung
                    website.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-4 mb-8">
                <div class="card p-4 border-2 border-red-200 bg-red-50">
                    <div class="text-2xl mb-2">üö´ Tanpa Session</div>
                    <p class="text-sm text-slate-600 mb-2">Setiap halaman tidak tahu siapa pengunjungnya</p>
                    <ul class="text-xs text-red-600 space-y-1">
                        <li>‚ùå Tidak bisa "ingat" user yang sudah login</li>
                        <li>‚ùå User harus login ulang setiap pindah halaman</li>
                        <li>‚ùå Tidak bisa menyimpan data sementara</li>
                    </ul>
                </div>
                <div class="card p-4 border-2 border-green-200 bg-green-50">
                    <div class="text-2xl mb-2">‚úÖ Dengan Session</div>
                    <p class="text-sm text-slate-600 mb-2">Data tersimpan & bisa diakses di semua halaman</p>
                    <ul class="text-xs text-green-600 space-y-1">
                        <li>‚úÖ Server "mengingat" siapa user yang login</li>
                        <li>‚úÖ Data tersedia selama browser masih terbuka</li>
                        <li>‚úÖ Bisa simpan nama, role, preference, dll</li>
                    </ul>
                </div>
            </div>

            <!-- Kode Session Dasar -->
            <h3 class="text-xl font-bold text-slate-800 mb-3">üíª Kode Session Dasar</h3>
            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">session_dasar.php</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
// 1Ô∏è‚É£ WAJIB dipanggil di awal setiap file yang pakai session
session_start();

// 2Ô∏è‚É£ Menyimpan data ke session (seperti isi kartu pengunjung)
$_SESSION['nama'] = "Budi";
$_SESSION['role'] = "admin";

// 3Ô∏è‚É£ Mengambil data dari session
echo "Halo, " . $_SESSION['nama']; // Output: Halo, Budi

// 4Ô∏è‚É£ Menghapus SATU session tertentu
unset($_SESSION['nama']);

// 5Ô∏è‚É£ Menghapus SEMUA session (logout total)
session_destroy();
?&gt;</code></pre>
                </div>
            </div>

            <!-- Penjelasan Baris per Baris -->
            <div class="card p-4 mb-8">
                <h4 class="font-bold text-slate-800 mb-3">üìñ Penjelasan Setiap Baris:</h4>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-2 text-left font-bold text-slate-700">Kode</th>
                                <th class="p-2 text-left font-bold text-slate-700">Fungsi</th>
                                <th class="p-2 text-left font-bold text-slate-700">Analogi</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr>
                                <td class="p-2"><code class="bg-slate-100 px-1 rounded">session_start()</code></td>
                                <td class="p-2">Memulai atau melanjutkan session</td>
                                <td class="p-2 text-slate-500">Ambil kartu pengunjung</td>
                            </tr>
                            <tr>
                                <td class="p-2"><code class="bg-slate-100 px-1 rounded">$_SESSION['key']</code></td>
                                <td class="p-2">Array superglobal untuk simpan data</td>
                                <td class="p-2 text-slate-500">Isi kartu dengan info</td>
                            </tr>
                            <tr>
                                <td class="p-2"><code class="bg-slate-100 px-1 rounded">unset($_SESSION['key'])</code>
                                </td>
                                <td class="p-2">Hapus satu data session</td>
                                <td class="p-2 text-slate-500">Hapus satu info dari kartu</td>
                            </tr>
                            <tr>
                                <td class="p-2"><code class="bg-slate-100 px-1 rounded">session_destroy()</code></td>
                                <td class="p-2">Hapus semua session (logout)</td>
                                <td class="p-2 text-slate-500">Kembalikan kartu & keluar</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="alert alert-warning mb-8">
                <span class="text-2xl">‚ö†Ô∏è</span>
                <div>
                    <strong class="text-amber-800">Aturan Penting!</strong>
                    <span class="text-amber-700"><code>session_start()</code> HARUS dipanggil di baris pertama,
                        sebelum ada output HTML apapun (termasuk spasi kosong)!</span>
                </div>
            </div>

            <!-- ======================= BAGIAN 2: DATABASE USERS ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4 mt-12">üóÑÔ∏è Bagian 2: Membuat Tabel Users</h2>

            <p class="text-slate-600 mb-4">
                Sebelum membuat login/register, kita perlu tabel untuk menyimpan data user di database.
            </p>

            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">SQL - phpMyAdmin</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-sql">CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nama VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL
);</code></pre>
                </div>
            </div>

            <div class="card p-4 mb-8">
                <h4 class="font-bold text-slate-800 mb-3">üìñ Penjelasan Struktur Tabel:</h4>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-2 text-left">Kolom</th>
                                <th class="p-2 text-left">Tipe</th>
                                <th class="p-2 text-left">Penjelasan</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr>
                                <td class="p-2 font-mono text-indigo-600">id</td>
                                <td class="p-2">INT AUTO_INCREMENT</td>
                                <td class="p-2">ID unik, otomatis bertambah</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-mono text-indigo-600">nama</td>
                                <td class="p-2">VARCHAR(100)</td>
                                <td class="p-2">Nama lengkap user</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-mono text-indigo-600">email</td>
                                <td class="p-2">VARCHAR(100) UNIQUE</td>
                                <td class="p-2">Email (tidak boleh sama/duplikat)</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-mono text-indigo-600">password</td>
                                <td class="p-2">VARCHAR(255)</td>
                                <td class="p-2">Password yang sudah di-hash (panjang karena hasil hash)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ======================= BAGIAN 3: REGISTER ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4 mt-12">üìù Bagian 3: Form Register</h2>

            <div class="card p-6 mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-emerald-500">
                <h3 class="font-bold text-emerald-800 mb-2">üîê Keamanan Password</h3>
                <p class="text-slate-700 mb-2">
                    <strong>JANGAN PERNAH</strong> simpan password dalam bentuk asli (plain text)!
                </p>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div class="bg-red-100 p-3 rounded">
                        <strong class="text-red-700">‚ùå SALAH:</strong>
                        <code class="block mt-1 text-red-600">password = "rahasia123"</code>
                        <span class="text-xs text-red-500">Kalau database bocor, password ketahuan!</span>
                    </div>
                    <div class="bg-green-100 p-3 rounded">
                        <strong class="text-green-700">‚úÖ BENAR:</strong>
                        <code class="block mt-1 text-green-600 text-xs">$2y$10$xyz...</code>
                        <span class="text-xs text-green-600">Password di-hash, tidak bisa dibaca!</span>
                    </div>
                </div>
            </div>

            <h3 class="text-xl font-bold text-slate-800 mb-3">üíª Kode Register Lengkap</h3>
            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">register.php</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
// ========== BAGIAN PHP (LOGIKA) ==========
include 'koneksi.php';  // Koneksi ke database
$pesan = "";            // Variabel untuk pesan error/sukses

// Cek apakah form disubmit (method POST)
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    
    // Ambil data dari form
    $nama = $_POST['nama'];
    $email = $_POST['email'];
    $password = $_POST['password'];
    
    // üîê HASH password sebelum disimpan!
    // PASSWORD_DEFAULT = algoritma terbaik saat ini
    $password_hash = password_hash($password, PASSWORD_DEFAULT);
    
    // Cek apakah email sudah terdaftar
    $cek = mysqli_query($conn, "SELECT * FROM users WHERE email='$email'");
    
    if (mysqli_num_rows($cek) > 0) {
        // Email sudah ada di database
        $pesan = "Email sudah terdaftar!";
    } else {
        // Email belum ada, lanjut simpan
        $sql = "INSERT INTO users (nama, email, password) 
                VALUES ('$nama', '$email', '$password_hash')";
        
        if (mysqli_query($conn, $sql)) {
            // Berhasil! Redirect ke halaman login
            header("Location: login.php?status=sukses");
            exit;  // Wajib setelah redirect
        } else {
            $pesan = "Gagal mendaftar!";
        }
    }
}
?&gt;

&lt;!-- ========== BAGIAN HTML (TAMPILAN) ========== --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Daftar Akun&lt;/title&gt;
    &lt;style&gt;
        /* CSS untuk tampilan form yang menarik */
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        .form-container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
        }
        h2 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        input:focus {
            border-color: #667eea;
            outline: none;
        }
        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover {
            opacity: 0.9;
        }
        .error {
            background: #ffe0e0;
            color: #d00;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .link {
            text-align: center;
            margin-top: 20px;
        }
        .link a {
            color: #667eea;
            text-decoration: none;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="form-container"&gt;
        &lt;h2&gt;üìù Daftar Akun Baru&lt;/h2&gt;
        
        &lt;!-- Tampilkan pesan error jika ada --&gt;
        &lt;?php if ($pesan): ?&gt;
            &lt;div class="error"&gt;&lt;?php echo $pesan; ?&gt;&lt;/div&gt;
        &lt;?php endif; ?&gt;
        
        &lt;form method="POST"&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Nama Lengkap&lt;/label&gt;
                &lt;input type="text" name="nama" placeholder="Masukkan nama..." required&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Email&lt;/label&gt;
                &lt;input type="email" name="email" placeholder="contoh@email.com" required&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Password&lt;/label&gt;
                &lt;input type="password" name="password" placeholder="Minimal 6 karakter" required&gt;
            &lt;/div&gt;
            &lt;button type="submit"&gt;üöÄ Daftar Sekarang&lt;/button&gt;
        &lt;/form&gt;
        
        &lt;div class="link"&gt;
            Sudah punya akun? &lt;a href="login.php"&gt;Login di sini&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                </div>
            </div>

            <!-- Penjelasan Detail Register -->
            <div class="card p-4 mb-8">
                <h4 class="font-bold text-slate-800 mb-3">üìñ Penjelasan Kode Register:</h4>
                <div class="space-y-4">
                    <div class="bg-blue-50 p-3 rounded">
                        <strong class="text-blue-800">1. Bagian PHP (Atas)</strong>
                        <ul class="text-sm text-slate-600 mt-2 space-y-1">
                            <li>‚Ä¢ <code>include 'koneksi.php'</code> ‚Üí Memanggil file koneksi database</li>
                            <li>‚Ä¢ <code>$_SERVER['REQUEST_METHOD']</code> ‚Üí Mengecek apakah form dikirim via POST</li>
                            <li>‚Ä¢ <code>$_POST['nama']</code> ‚Üí Mengambil nilai dari input dengan name="nama"</li>
                            <li>‚Ä¢ <code>password_hash()</code> ‚Üí Mengenkripsi password agar aman</li>
                            <li>‚Ä¢ <code>header("Location: ...")</code> ‚Üí Redirect ke halaman lain</li>
                        </ul>
                    </div>
                    <div class="bg-green-50 p-3 rounded">
                        <strong class="text-green-800">2. Bagian HTML (Bawah)</strong>
                        <ul class="text-sm text-slate-600 mt-2 space-y-1">
                            <li>‚Ä¢ <code>&lt;form method="POST"&gt;</code> ‚Üí Form mengirim data via POST</li>
                            <li>‚Ä¢ <code>name="nama"</code> ‚Üí Attribute untuk akses data di PHP dengan $_POST['nama']
                            </li>
                            <li>‚Ä¢ <code>required</code> ‚Üí Browser akan validasi field tidak boleh kosong</li>
                            <li>‚Ä¢ <code>&lt;?php if ($pesan): ?&gt;</code> ‚Üí Menampilkan pesan hanya jika ada isinya
                            </li>
                        </ul>
                    </div>
                    <div class="bg-purple-50 p-3 rounded">
                        <strong class="text-purple-800">3. Bagian CSS (Style)</strong>
                        <ul class="text-sm text-slate-600 mt-2 space-y-1">
                            <li>‚Ä¢ <code>background: linear-gradient(...)</code> ‚Üí Background gradasi warna</li>
                            <li>‚Ä¢ <code>border-radius: 16px</code> ‚Üí Membuat sudut rounded/melengkung</li>
                            <li>‚Ä¢ <code>box-shadow</code> ‚Üí Efek bayangan 3D</li>
                            <li>‚Ä¢ <code>input:focus</code> ‚Üí Style saat input diklik/aktif</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- ======================= BAGIAN 4: LOGIN ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4 mt-12">üîë Bagian 4: Form Login</h2>

            <div class="card p-6 mb-6 bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-500">
                <h3 class="font-bold text-amber-800 mb-2">üîç Cara Kerja Verifikasi Password</h3>
                <div class="text-slate-700 text-sm">
                    <p class="mb-2">Saat login, kita <strong>TIDAK</strong> bisa membandingkan password langsung karena
                        yang di database sudah di-hash.</p>
                    <div class="bg-white p-3 rounded mt-2">
                        <p><strong>User input:</strong> <code>"rahasia123"</code></p>
                        <p><strong>Di database:</strong> <code>"$2y$10$xyz..."</code> (hasil hash)</p>
                        <p class="mt-2 text-green-700">‚úÖ <code>password_verify("rahasia123", "$2y$10$xyz...")</code> ‚Üí
                            <strong>TRUE</strong></p>
                    </div>
                </div>
            </div>

            <h3 class="text-xl font-bold text-slate-800 mb-3">üíª Kode Login Lengkap</h3>
            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">login.php</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
// ========== BAGIAN PHP (LOGIKA) ==========
session_start();          // WAJIB untuk menggunakan session
include 'koneksi.php';
$pesan = "";

// Jika SUDAH login, langsung redirect ke dashboard
if (isset($_SESSION['user_id'])) {
    header("Location: index.php");
    exit;
}

// Proses login saat form disubmit
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $email = $_POST['email'];
    $password = $_POST['password'];
    
    // Cari user berdasarkan email
    $sql = "SELECT * FROM users WHERE email='$email'";
    $result = mysqli_query($conn, $sql);
    
    // Cek apakah email ditemukan (1 baris)
    if (mysqli_num_rows($result) == 1) {
        $user = mysqli_fetch_assoc($result);  // Ambil data user
        
        // üîê Verifikasi password dengan hash di database
        if (password_verify($password, $user['password'])) {
            // ‚úÖ PASSWORD BENAR! Simpan data ke session
            $_SESSION['user_id'] = $user['id'];
            $_SESSION['user_nama'] = $user['nama'];
            $_SESSION['user_email'] = $user['email'];
            
            // Redirect ke dashboard
            header("Location: index.php");
            exit;
        } else {
            $pesan = "Password salah!";
        }
    } else {
        $pesan = "Email tidak ditemukan!";
    }
}
?&gt;

&lt;!-- ========== BAGIAN HTML (TAMPILAN) ========== --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        .form-container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
        }
        h2 { text-align: center; color: #333; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #555; font-weight: bold; }
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        input:focus { border-color: #11998e; outline: none; }
        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        button:hover { opacity: 0.9; }
        .error { background: #ffe0e0; color: #d00; padding: 12px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
        .success { background: #e0ffe0; color: #0a0; padding: 12px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
        .link { text-align: center; margin-top: 20px; }
        .link a { color: #11998e; text-decoration: none; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="form-container"&gt;
        &lt;h2&gt;üîë Login&lt;/h2&gt;
        
        &lt;!-- Pesan sukses dari register --&gt;
        &lt;?php if (isset($_GET['status']) && $_GET['status'] == 'sukses'): ?&gt;
            &lt;div class="success"&gt;‚úÖ Registrasi berhasil! Silakan login.&lt;/div&gt;
        &lt;?php endif; ?&gt;
        
        &lt;!-- Pesan error --&gt;
        &lt;?php if ($pesan): ?&gt;
            &lt;div class="error"&gt;&lt;?php echo $pesan; ?&gt;&lt;/div&gt;
        &lt;?php endif; ?&gt;
        
        &lt;form method="POST"&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Email&lt;/label&gt;
                &lt;input type="email" name="email" placeholder="contoh@email.com" required&gt;
            &lt;/div&gt;
            &lt;div class="form-group"&gt;
                &lt;label&gt;Password&lt;/label&gt;
                &lt;input type="password" name="password" placeholder="Masukkan password..." required&gt;
            &lt;/div&gt;
            &lt;button type="submit"&gt;üöÄ Login&lt;/button&gt;
        &lt;/form&gt;
        
        &lt;div class="link"&gt;
            Belum punya akun? &lt;a href="register.php"&gt;Daftar di sini&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                </div>
            </div>

            <!-- Penjelasan Detail Login -->
            <div class="card p-4 mb-8">
                <h4 class="font-bold text-slate-800 mb-3">üìñ Penjelasan Alur Login:</h4>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-indigo-100">
                            <tr>
                                <th class="p-2 text-left">Langkah</th>
                                <th class="p-2 text-left">Kode</th>
                                <th class="p-2 text-left">Penjelasan</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr>
                                <td class="p-2 font-bold">1</td>
                                <td class="p-2"><code>session_start()</code></td>
                                <td class="p-2">Mulai session agar bisa simpan data login</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold">2</td>
                                <td class="p-2"><code>isset($_SESSION['user_id'])</code></td>
                                <td class="p-2">Cek apakah sudah login (ada session?)</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold">3</td>
                                <td class="p-2"><code>SELECT * FROM users WHERE email=...</code></td>
                                <td class="p-2">Cari user di database berdasarkan email</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold">4</td>
                                <td class="p-2"><code>mysqli_fetch_assoc($result)</code></td>
                                <td class="p-2">Ambil data user sebagai array</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold">5</td>
                                <td class="p-2"><code>password_verify()</code></td>
                                <td class="p-2">Bandingkan password input dengan hash</td>
                            </tr>
                            <tr>
                                <td class="p-2 font-bold">6</td>
                                <td class="p-2"><code>$_SESSION['user_id'] = ...</code></td>
                                <td class="p-2">Simpan info user ke session (login berhasil!)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ======================= BAGIAN 5: PROTECTED PAGE ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4 mt-12">üõ°Ô∏è Bagian 5: Halaman Terproteksi</h2>

            <p class="text-slate-600 mb-4">
                Untuk memproteksi halaman agar hanya bisa diakses setelah login, buat file <code>cek_login.php</code>
                yang akan di-include di setiap halaman yang perlu proteksi.
            </p>

            <h3 class="text-xl font-bold text-slate-800 mb-3">üíª File Cek Login</h3>
            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">cek_login.php</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
session_start();

// Jika BELUM login (session user_id tidak ada)
if (!isset($_SESSION['user_id'])) {
    // Redirect paksa ke halaman login
    header("Location: login.php");
    exit;  // Stop eksekusi kode di bawahnya
}
// Jika sudah login, file ini tidak melakukan apa-apa
// dan halaman yang meng-include akan lanjut tampil
?&gt;</code></pre>
                </div>
            </div>

            <h3 class="text-xl font-bold text-slate-800 mb-3">üíª Contoh Dashboard Terproteksi</h3>
            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">index.php (Dashboard)</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
// üõ°Ô∏è Include cek login di BARIS PERTAMA!
// Jika belum login, user akan di-redirect ke login.php
include 'cek_login.php';
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Dashboard Perpustakaan&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .header h1 { margin: 0; }
        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
        }
        .logout-btn:hover { background: rgba(255,255,255,0.3); }
        .welcome {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="header"&gt;
        &lt;h1&gt;üìö Perpustakaan Digital&lt;/h1&gt;
        &lt;a href="logout.php" class="logout-btn"&gt;üö™ Logout&lt;/a&gt;
    &lt;/div&gt;
    
    &lt;div class="welcome"&gt;
        &lt;!-- Tampilkan nama dari session --&gt;
        &lt;h2&gt;Selamat Datang, &lt;?php echo $_SESSION['user_nama']; ?&gt;! üëã&lt;/h2&gt;
        &lt;p&gt;Email: &lt;?php echo $_SESSION['user_email']; ?&gt;&lt;/p&gt;
        &lt;p&gt;Ini adalah halaman yang hanya bisa diakses setelah login.&lt;/p&gt;
        
        &lt;hr style="margin: 20px 0"&gt;
        
        &lt;h3&gt;Menu:&lt;/h3&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;a href="buku.php"&gt;üìñ Kelola Buku&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="anggota.php"&gt;üë• Kelola Anggota&lt;/a&gt;&lt;/li&gt;
            &lt;li&gt;&lt;a href="peminjaman.php"&gt;üìã Peminjaman&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                </div>
            </div>

            <!-- ======================= BAGIAN 6: LOGOUT ======================= -->
            <h2 class="text-2xl font-bold text-slate-800 mb-4 mt-12">üö™ Bagian 6: Logout</h2>

            <div class="code-block mb-4">
                <div class="code-header">
                    <div class="code-dots"><span></span><span></span><span></span></div>
                    <span class="text-slate-400 text-sm">logout.php</span>
                    <button class="copy-btn">Salin</button>
                </div>
                <div class="code-content">
                    <pre><code class="language-php">&lt;?php
session_start();

// Hapus SEMUA data session
session_destroy();

// Redirect ke halaman login
header("Location: login.php");
exit;
?&gt;</code></pre>
                </div>
            </div>

            <div class="card p-4 mb-8">
                <h4 class="font-bold text-slate-800 mb-3">üìñ Penjelasan Logout:</h4>
                <table class="w-full text-sm">
                    <tbody class="divide-y">
                        <tr>
                            <td class="p-2 font-mono text-indigo-600">session_start()</td>
                            <td class="p-2">Harus dipanggil dulu sebelum bisa menghapus session</td>
                        </tr>
                        <tr>
                            <td class="p-2 font-mono text-indigo-600">session_destroy()</td>
                            <td class="p-2">Menghapus semua data session (user_id, user_nama, dll)</td>
                        </tr>
                        <tr>
                            <td class="p-2 font-mono text-indigo-600">header("Location: ...")</td>
                            <td class="p-2">Redirect user kembali ke halaman login</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- ======================= RINGKASAN ======================= -->
            <div
                class="card p-6 mb-8 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 border-2 border-indigo-200">
                <h2 class="text-xl font-bold text-slate-800 mb-4">üìã Ringkasan: Alur Lengkap Autentikasi</h2>

                <div class="bg-white p-4 rounded-lg mb-4">
                    <h4 class="font-bold text-purple-700 mb-3">üîÑ Diagram Alur:</h4>
                    <div class="text-center text-sm">
                        <div class="inline-block bg-blue-100 p-3 rounded-lg mb-2">üìù Register</div>
                        <div class="text-2xl">‚Üì</div>
                        <div class="inline-block bg-green-100 p-3 rounded-lg mb-2">üîë Login</div>
                        <div class="text-2xl">‚Üì</div>
                        <div class="inline-block bg-amber-100 p-3 rounded-lg mb-2">üõ°Ô∏è Dashboard (Protected)</div>
                        <div class="text-2xl">‚Üì</div>
                        <div class="inline-block bg-red-100 p-3 rounded-lg">üö™ Logout</div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="font-bold text-blue-700 mb-2">üìù Register:</h4>
                        <ol class="list-decimal list-inside text-slate-600 text-sm space-y-1">
                            <li>User isi form nama, email, password</li>
                            <li>Cek email sudah ada atau belum</li>
                            <li>Hash password dengan <code>password_hash()</code></li>
                            <li>Simpan ke database</li>
                            <li>Redirect ke login</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="font-bold text-green-700 mb-2">üîë Login:</h4>
                        <ol class="list-decimal list-inside text-slate-600 text-sm space-y-1">
                            <li>User isi email & password</li>
                            <li>Cari user di database</li>
                            <li>Verifikasi dengan <code>password_verify()</code></li>
                            <li>Simpan info ke SESSION</li>
                            <li>Redirect ke dashboard</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Latihan -->
            <div class="card p-6 mb-8 border-2 border-amber-200 bg-amber-50">
                <h2 class="text-xl font-bold text-slate-800 mb-3">üìù Latihan</h2>
                <ol class="list-decimal list-inside space-y-2 text-slate-600">
                    <li>Buat tabel <code>users</code> di database perpustakaan dengan phpMyAdmin</li>
                    <li>Buat halaman <code>register.php</code> dengan styling yang menarik</li>
                    <li>Buat halaman <code>login.php</code> dengan validasi email & password</li>
                    <li>Buat file <code>cek_login.php</code> untuk proteksi halaman</li>
                    <li>Proteksi halaman CRUD buku agar hanya bisa diakses setelah login</li>
                    <li>Tambahkan tombol logout di setiap halaman yang terproteksi</li>
                </ol>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between items-center pt-8 border-t">
                <a href="sql-dasar.html" class="text-slate-500 hover:text-indigo-600 flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                    SQL Dasar
                </a>
                <a href="../minggu-3/menampilkan-data.html" class="btn-primary">
                    Minggu 3: Menampilkan Data
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </a>
            </div>

        </div>
    </section>

    <footer class="bg-slate-900 text-white py-8 px-4 mt-12">
        <div class="max-w-7xl mx-auto text-center">
            <p class="text-slate-400">¬© 2026 PHPuntukSMK</p>
        </div>
    </footer>

    <script src="../../js/main.js"></script>
    <script>hljs.highlightAll();</script>
</body>

</html>