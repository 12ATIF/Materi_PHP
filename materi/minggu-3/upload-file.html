<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload File | Minggu 3 | PHP untuk SMK</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
</head>
<body class="bg-slate-50">
  <!-- Navbar -->
  <nav class="navbar fixed top-0 left-0 right-0 z-50 px-4 lg:px-8 py-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <a href="../../index.html" class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center">
          <span class="text-white font-bold">&lt;/&gt;</span>
        </div>
        <span class="font-bold text-xl text-slate-800 hidden sm:block">PHP<span class="text-indigo-600">SMK</span></span>
      </a>
      <div class="hidden md:flex items-center gap-8">
        <a href="../../index.html" class="text-slate-600 hover:text-indigo-600">Beranda</a>
        <a href="../../silabus.html" class="text-slate-600 hover:text-indigo-600">Silabus</a>
        <a href="menampilkan-data.html" class="text-indigo-600 font-medium">Materi</a>
        <a href="../../project-akhir.html" class="text-slate-600 hover:text-indigo-600">Project Akhir</a>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <section class="pt-28 pb-8 px-4 bg-gradient-to-br from-amber-500 to-orange-500">
    <div class="max-w-4xl mx-auto">
      <div class="week-badge week-3 mb-4">Minggu 3 - Materi 11</div>
      <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">ğŸ“˜ Upload File</h1>
      <p class="text-white/90">Mengunggah gambar dan file ke server</p>
    </div>
  </section>

  <!-- Content -->
  <section class="py-12 px-4">
    <div class="max-w-4xl mx-auto">
      
      <!-- Tujuan -->
      <div class="card p-6 mb-8">
        <h2 class="text-xl font-bold text-slate-800 mb-3">ğŸ¯ Tujuan Pembelajaran</h2>
        <ul class="space-y-2 text-slate-600">
          <li>â€¢ Membuat form upload file</li>
          <li>â€¢ Memproses file yang diupload dengan PHP</li>
          <li>â€¢ Validasi tipe dan ukuran file</li>
        </ul>
      </div>
      
      <!-- Form Upload -->
      <h2 class="text-2xl font-bold text-slate-800 mb-4">ğŸ“¤ Form Upload</h2>
      
      <div class="alert alert-info mb-6">
        <span class="text-2xl">ğŸ’¡</span>
        <div>
          <strong class="text-indigo-800">Penting:</strong>
          <span class="text-indigo-700">Form upload harus punya atribut <code>enctype="multipart/form-data"</code></span>
        </div>
      </div>
      
      <div class="code-block mb-6">
        <div class="code-header">
          <div class="code-dots"><span></span><span></span><span></span></div>
          <span class="text-slate-400 text-sm">form_upload.html</span>
          <button class="copy-btn">Salin</button>
        </div>
        <div class="code-content">
<pre><code class="language-php">&lt;form action="upload.php" method="POST" enctype="multipart/form-data"&gt;
    &lt;label&gt;Pilih Gambar:&lt;/label&gt;
    &lt;input type="file" name="gambar" accept="image/*" required&gt;
    &lt;button type="submit"&gt;Upload&lt;/button&gt;
&lt;/form&gt;</code></pre>
        </div>
      </div>
      
      <!-- Proses Upload -->
      <h2 class="text-2xl font-bold text-slate-800 mb-4">âš™ï¸ Proses Upload di PHP</h2>
      <div class="code-block mb-6">
        <div class="code-header">
          <div class="code-dots"><span></span><span></span><span></span></div>
          <span class="text-slate-400 text-sm">upload.php</span>
          <button class="copy-btn">Salin</button>
        </div>
        <div class="code-content">
<pre><code class="language-php">&lt;?php
$folder = "uploads/";

// Buat folder jika belum ada
if (!file_exists($folder)) {
    mkdir($folder, 0777, true);
}

// Ambil info file
$nama_file = $_FILES['gambar']['name'];
$tmp_file  = $_FILES['gambar']['tmp_name'];
$ukuran    = $_FILES['gambar']['size'];
$error     = $_FILES['gambar']['error'];

// Validasi error
if ($error === 0) {
    // Buat nama unik
    $nama_baru = time() . "_" . $nama_file;
    $path = $folder . $nama_baru;
    
    // Pindahkan file
    if (move_uploaded_file($tmp_file, $path)) {
        echo "Upload berhasil! File: $nama_baru";
    } else {
        echo "Gagal memindahkan file!";
    }
} else {
    echo "Error upload: $error";
}
?&gt;</code></pre>
        </div>
      </div>
      
      <!-- Validasi -->
      <h2 class="text-2xl font-bold text-slate-800 mb-4">ğŸ”’ Validasi File</h2>
      <div class="code-block mb-6">
        <div class="code-header">
          <div class="code-dots"><span></span><span></span><span></span></div>
          <span class="text-slate-400 text-sm">validasi_upload.php</span>
          <button class="copy-btn">Salin</button>
        </div>
        <div class="code-content">
<pre><code class="language-php">&lt;?php
$allowed = ['jpg', 'jpeg', 'png', 'gif'];
$max_size = 2 * 1024 * 1024; // 2MB

$nama_file = $_FILES['gambar']['name'];
$ukuran = $_FILES['gambar']['size'];
$ext = strtolower(pathinfo($nama_file, PATHINFO_EXTENSION));

// Cek ekstensi
if (!in_array($ext, $allowed)) {
    die("Error: Tipe file tidak diizinkan!");
}

// Cek ukuran
if ($ukuran > $max_size) {
    die("Error: Ukuran file terlalu besar! Max 2MB");
}

// Lanjut proses upload...
?&gt;</code></pre>
        </div>
      </div>
      
      <div class="alert alert-warning mb-6">
        <span class="text-2xl">âš ï¸</span>
        <div>
          <strong class="text-amber-800">Keamanan:</strong>
          <span class="text-amber-700">Selalu validasi file! Jangan izinkan file berbahaya seperti .php masuk ke server.</span>
        </div>
      </div>
      
      <!-- Latihan -->
      <div class="card p-6 mb-8 border-2 border-amber-200">
        <h2 class="text-xl font-bold text-slate-800 mb-3">ğŸ“ Latihan</h2>
        <ol class="list-decimal list-inside space-y-2 text-slate-600">
          <li>Buat form upload untuk cover buku</li>
          <li>Validasi hanya gambar (jpg, png) yang diizinkan</li>
          <li>Simpan nama file ke database</li>
        </ol>
      </div>
      
      <!-- Navigation -->
      <div class="flex justify-between items-center pt-8 border-t">
        <a href="crud-php.html" class="text-slate-500 hover:text-indigo-600 flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
          CRUD PHP
        </a>
        <a href="tampilan-dinamis.html" class="btn-primary">
          Materi Selanjutnya
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </a>
      </div>
      
    </div>
  </section>

  <footer class="bg-slate-900 text-white py-8 px-4 mt-12">
    <div class="max-w-7xl mx-auto text-center">
      <p class="text-slate-400">Â© 2026 PHPuntukSMK</p>
    </div>
  </footer>

  <script src="../../js/main.js"></script>
  <script>hljs.highlightAll();</script>
</body>
</html>
